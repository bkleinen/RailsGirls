<% provide(:title, 'Listing registrations') %>
<h1>Listing Registrations</h1>
<div id="list_options">
  <%= form_tag(registrations_path, :method => :get) do %>
    <dl>
      <dt>Workshop</dt>
      <dd>
        <%= select_tag'workshop', options_for_select(@list_options[:workshop], @previously_selected_workshop)%>
      </dd>
      <dt>Form Type</dt>
      <dd>
        <%= select_tag'form_type', options_for_select(@list_options[:form_type], @previously_selected_type)%>
      </dd>
      <dd>
      <%= submit_tag "Update list" %> or
      <h2>Export data:</h2>
        <%= link_to "CSV", registrations_path(format: "csv") %> |
        <%= link_to "Excel", registrations_path(format: "xls") %>
      </dd>
    </dl>
  <% end %>
</div>
<table>
  <thead>
    <tr>
      <% if (@participant_registrations.first != nil) && (!@participant_structure.blank?)%>
        <% @participant_structure.each do |element| %>
          <td><strong> <%= element['caption']%> </strong></td>
        <% end %>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @participant_registrations.each do |registration| %>
      <tr>
        <% @participant_structure.each do |element| %>
          <td><%= registration["attributes"][element["name"]] %></td>
        <% end %>

        <td><%= link_to 'Show', registration_path(registration["id"]) %></td>
        <td><%= link_to 'Edit', edit_registration_path(registration["id"]) %></td>
        <td><%= link_to 'Destroy', registration_path(registration["id"]), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <% if (@coach_registrations.first != nil) && (!@coach_structure.blank?)%>
        <% @coach_structure.each do |element| %>
          <td><strong> <%= element['caption']%> </strong></td>
        <% end %>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @coach_registrations.each do |registration| %>
      <tr>
        <% @coach_structure.each do |element| %>
          <td><%= registration["attributes"][element["name"]] %></td>
        <% end %>

        <td><%= link_to 'Show', registration_path(registration["id"]) %></td>
        <td><%= link_to 'Edit', edit_registration_path(registration["id"]) %></td>
        <td><%= link_to 'Destroy', registration_path(registration["id"]), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

